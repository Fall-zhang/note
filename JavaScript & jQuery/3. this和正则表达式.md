## this的使用

只要封装函数，**任何一个函数**都会内置名为this的变量，this变量存储的是当前函数主人的**地址**

```html
<script>
     window.onload =function(){
         var aBtn = document.getElementsByTagName("button");
         for(var i = 0 ;i<aBtn.length;i++){
            aBtn[i].onclick = function(){
                 alert(this);
            }  
         } 
         alert("end cycle");
     }
</script>
<body>
    <button>按钮1</button>
    <button>按钮2</button>
    <button>按钮3</button>
</body>
```

### 常见三种this的指向

```javascript
// 1.全局函数，指向window
function show(){
    console.log(this);//指向window
}
// 2.向当前方法名或对象名，this->person
var person = {
    username : 'iron-man';
    show:function(){
        console.log(persion.username);
        console.log(this.username);
    }
}
// 3.this 指向button
window.onload = function(){
    var oBtn = document.getElementById('btn');
    oBtn.onclick = function(){
        console.log(this.innerHTML);
    }
}
// 注：在箭头函数中，this指向当前函数的父元素
```

### 改变this的指向

**强制改变this指向**

- call
  - 使用格式：函数名.call();
  - 参数：
    - 第一个参数为this指向的值，传入什么，指向什么
    - 从第二个参数开始：将原函数的参数往后顺延一位
- apply
  - 使用格式：函数名.apply()
  - 参数：
    - 第一个参数传入参数为this指向的值，传入什么，指向什么
    - 第二个参数：用数组，放入我们原有的所有参数
- bind  预设this指向
  - 使用方法和call & apply不同
  - 返回值是函数(function)
    - 改变this指向之后的函数
    - 该函数为原来的函数

```js
//call的使用
var arr = [50,44,22,64];
Math.min.apply(null,arr)

//bind 的使用方法
function take(name,type){
    console.log(name+"云云云"+type+this);
};
var aftertake = take.bind("bind")(11,"make");
```

> Tips: call和 apply 是调用函数，并且改变 this 指向，bind 是返回一个改变 this 指向的函数

## 正则表达式

### **正则表达式的声明**

```javascript
var box1 = new RegExp('hello','ig');
var box2 = RegExp('hello','ig')
var box3 = /hello/gi
//i表示不区分大小写
//g表示可以选取多个
//m表示可以换行匹配，每一行的内容独立 
```

>仅有的两个方法：
>
>- **test**
>
>格式：`box.test(string)`
>
>功能：匹配该正则是否存在于string中
>
>返回值：成功返回true失败返回false
>
>- **exec**
>
>格式：`box.exec(string)`
>
>功能：匹配该正则是否存在于string中
>
>返回值：返回匹配到的串，成功返回数组，失败返回null


### 字符串中正则的使用

- **match()**
  - 格式：字符串.match(正则)；
  - 功能：在字符串中匹配是否有符合的正则表达式
  - 返回值：返回有字字符串的数组
- **replace()**
  - 格式：字符串.replace(正则/oldStr,newStr)
  - 功能：用心的字符串替换掉旧字符串
  - 返回值：替换成功的新字符串
- **split()**
  - 格式：字符串.split(分隔符/正则)
  - 功能：用分隔符将字符串分割
  - 返回值：用字符串分割后的数组
- **search()**
  - 格式：字符串.search(子串/正则)
  - 功能：找到含有子串或正则的下标

```javascript
var str = 'blibulibusdaiciaod'
// 
var box1 = /bl/g;
alert(str.match(box1));

var box2 = /bl/g;
alert(str.replace(box2,'--'));
alert(str.replace('cia','--'));

var box3 = /bl/g;// 本身可以找到全局，可以不用添加g
alert(str.split(box3));
alert(str.split('dai'));

var box4 = /bl/g;
alert(str.search('are'));
alert(str.search(box4));
```

### 元字符

在正则表达式中有特殊含义的字符

```markdown
## 单个数字和字符的元字符
- .    匹配任意字符
- []   匹配范围内的数字
- [0-9]  匹配0-9数字
- `[a-zA-Z0-9_]`数字字母下划线
- \w 等价于数字字母下划线
- \W 匹配非数字字母下划线
- \d 匹配单个数字
- \D 匹配单个非数字
- [^0-9]非0-9
- [^a-d]非a-d

## 重复字符  x(代表任意单个字符)
- `x?`     匹配0个或者1个x 存在或者不存在x,除此之外返回false
- `x+`     至少匹配一个字符  数字可以占多个位置 除此之外返回false
- `x*`	   匹配任意个x字符
- `x{m,n}` 匹配至少m个，最多n个字符
- `(xyz)`  小括号括起来的部分当作单个字符处理

## 空白字符
- \s   匹配任意单个空白字符
- \S	 匹配任意个非空白字符

## 锚点字符
- ^ 	 行首匹配
- $ 	 行尾匹配
> 注：同时使用时，意义为必须为同一个数字，完全相同的字符，否则返回false

## 多正则匹配
- |    用|隔开想要匹配的多个 出现以上任意一个字符为true

```

### 元字符的使用

```javascript
var str = 'ss1baffsdi';
var box = /ss.[a-c]a/;
alert(box.test(str));

var str = 'goloogu';
var box = /go/w?ogle/;
alert(box.test(str));
// 锚点字符
var str = 'geessagoogle';
var box3 = /^gle/;
alert(box3.test(str));

var str = 'golol';
var box4 = /golol|depp|srect/;// str中出现以上任意一个字符为true
alert(box4.test(str));

// 限制内容必须为中文
var str= '中国万岁';
var box5 = /^[\u4e00-\u9fa5]+$/;// 不支持中文符号
alert(box5.test(str));

// /^[0-9]+\.?[0-9]$|^[0-9]$/ 该正则限定必须为浮点数
```

