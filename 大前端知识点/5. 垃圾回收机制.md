## 垃圾回收机制

在JavaScript中，数据类型分为两类，简单类型和引用类型，对于简单类型，内存是保存在栈（stack）空间中，复杂数据类型，内存是保存在堆（heap）空间中。

- 基本类型：这些类型在内存中分别占有固定大小的空间，他们的值保存在栈空间，我们通过按值来访问的
- 引用类型：引用类型，值大小不固定，栈内存中存放地址指向堆内存中的对象。是按引用访问的。

而对于栈的内存空间，只保存简单数据类型的内存，**由操作系统自动分配和自动释放**。

而堆空间中的内存，由于大小不固定，系统无法无法进行自动释放，这个时候就需要**JS引擎来手动的释放这些内存**。当代码书写错误时，会使垃圾回收机制无法正确对内存进行释放，从而使浏览器占用内存不断增加

**为什么要进行垃圾回收？**

chrome限制了 v8引擎的内存使用（64位约1.4G/1464MB ， 32位约0.7G/732MB）

有两层原因，为浏览器设置，本身不可能遇到大量使用内存的场景。并且，清理内存很耗时间，会引起线程暂停的执行时间，性能也会下降。

JS引擎来手动的释放内存时。代码书写错误，会使垃圾回收机制无法正确对内存进行释放，从而使浏览器占用内存不断增加，JavaScript和应用、操作系统性能下降。

### 垃圾回收算法

大多数对象存活周期都很短，经历过一次垃圾回收后，就被释放掉，为了提高效率，堆被分成了两个部分。

- 新生代：新生代中存放的是生存时间短的对象（通常为1-8M容量）
- 老生代：存放生存时间久的对象（支持容量会大很多）

所以有两个垃圾回收器

副垃圾回收器 - `Scavenge` 主要负责新生代的垃圾回收

主垃圾回收器 - `Mark-Sweep & Mark-Compact` 主要负责老生代的垃圾回收

**Scavenge**

任何对象声明分配到的内存，会先放置到新生代中









## 参考文章

| 作者   | 链接                                       |
| ------ | ------------------------------------------ |
| 杨溜溜 | https://juejin.cn/post/6876638765025067015 |



