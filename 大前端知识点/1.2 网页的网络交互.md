第 1 步，**地址栏输入**

- 输入搜索内容：会根据浏览器默认搜索引擎生成网址
- 输入网址：符合URL规则，符合URL协议。内容+协议，合成合法的URL

第 2 步，**loading状态**

呈现之前的界面，新的页面相应数据还没有获得

第 3 步，**浏览器通信**

将URL发送给网络进程，并且根据 GET /index.html HTTP1.1

第 4 步，**网络进程处理**

- 获取到URL
  - 有缓存文件，拦截，直接200返回
  - 无缓存文件，进入到网络请求的过程
- 请求DNS（返回对应IP端口）
  - 缓存过当前域名信息，直接返回信息
  - 未缓存，发送请求获取根据域名解析出来的IP地址和端口号

第 5 步，**TCP三次握手建立连接**

http请求加上TCP头部，向下进行传输，（包括源端口号，目的程序端口号，用于校验数据完整性的序号）

第 6 步，**网络层**在数据包上加上IP头部，继续向下传输到底层，包括源IP地址和目标IP地址

第 7 步，**物理层传输**

第 8 步，**目的服务器主机**

- 网络层：解析出IP头部，识别出数据部分
- 传输层获取到数据包，解析出TCP头部，识别端口

第 9 步，**应用层HTTP解析请求和请求头**

- 重定向：直接返回相应数据的状态code，301或者302，同事在请求头的Location字段中附上重定向的地址。
- 不是重定向：
  - Cache-Control，想要浏览器的缓存数据
  - If-None-Match，没有更新，就返回304，否则返回新数据，200的状态码

第 10 步，**传输完成，TCP四次挥手**

第 11 步，**网络进程（数据包解析）**

Content-Type

- text/html 类型，通知浏览器获取到文档，准备渲染（1.发出“提交文档”消息）
- 字节流类型，下载管理器，该导航流程结束，不在进行

第 12 步，**渲染进程**

发出提交文档消息，确认提交给浏览器进程，网络进程建立传输数据的管道（2.建立同网络进程的管道）（3.确认并且提交给浏览器）

第 13 步，**浏览器更新界面状态**

web页面是空页面

- 安全状态
- 地址栏的URL
- 前进后退的历史状态

第 14 步，渲染进程，页面解析和子资源加载

- render tree 渲染树
  - 并行渲染DOM树--HTM解析器
  - 并行渲染CSS树--CSS规则和CSS解释器
- layout 宽高，颜色，位置

