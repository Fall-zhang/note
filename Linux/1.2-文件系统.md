> Create by **fall** on 2022-08-16
> Recently revised in 2022-10-16

## 文件系统

所有应用都需要存储和检索信息。运行时，会将一部分数据存储在内存中。

如果应用停止运行，数据就会丢失，我们想要的结果是，这些应用哪怕崩溃后，信息也应该保留下来。

多个应用同时访问一个文件，保证所有的文件都能访问。

因此分别对应文件系统的三个要求

- 必须保证大量信息的存放（使用磁盘进行读写操作）
- 出错时信息能够保留
- 允许多个进程访问信息

进程和线程的抽象、地址空间和文件都是操作系统的重要概念。

### 文件

文件（Files）是由进程创建的逻辑信息单元。操作系统中处理文件的部分称为文件系统（file system）

文件由操作系统进行管理，有关文件的构造、命名、访问、使用、保护、实现和管理方式都是操作系统设计的主要内容。用户通常会关心文件是由什么组成的，如何给文件进行命名，如何保护文件，以及可以对文件进行哪些操作等等。

**文件命名：**

文件的路径也可以算作是命名的一部分。

某些文件系统区分大小写（UNIX），有些则不区分（MS-DOS），MS-DOS 在嵌入式系统中非常广泛地使用

文件名称通常在最后一个点（`.`）后面的内容称之为后缀名，用来标志文件的类型，在 UNIX 系统中，文件扩展名只是一种约定，操作系统并不强制采用，但是用来编译的内容。

与 UNIX 相反，Windows 就会关注扩展名并对扩展名赋予了新的含义。`用户(或进程)` 可以在操作系统中注册`扩展名`，并且规定哪个程序能够拥有扩展名。

**文件结构：**

文件的结构有常用的三种方式

- 字节序列，文件的含义只能在程序中进行解释，提供了最大的灵活性（用户可以向文件内提供任何内容）
- 记录序列，文件有固定长度的记录，每个记录都有内部结构，**读操作返回一个记录，写操作重写或者追加一个记录**
- 文件由一颗`记录树`构成，记录树的长度不一定相同，每个记录树都在记录中的固定位置包含一个`key` 字段。这棵树按 key 进行排序，从而可以对特定的 key 进行快速查找。

## 参考文章

| 作者         | 文章名称                                                     |
| ------------ | ------------------------------------------------------------ |
| 爱笑的架构师 | [简直不要太硬了！一文带你彻底理解文件系统](https://juejin.cn/post/6844904102258819080) |
|              |                                                              |
|              |                                                              |

