> Create by **fall** on 14 Jan 2023
> Recently revised in 14 Jan 2023

## JS 动画

### 控制 DOM

动画必须包含

- 有开始，有结束
- 防止重复触发事件叠加

解决办法

- 运动必须保证每次设置一个定时器，必须关闭上一个定时器
- if & else 将运动和静止分隔开

回调函数

将一个函数作为实参传入后，使用该实参的过程称之为回调函数

在 C 语言，C++、里面称之为函数指针

### 防抖和节流

函数防抖（debounce），指的是，如果事件触发的频率小于 100ms，不去触发事件，如果大于 100ms，间隔 100ms 后执行，再给出最终结果会按照最终结果执行。

函数节流（throttle），指的是如果同一个事件，一秒内触发 100 次，持续十秒，全部执行会造成很大的资源浪费，所以，如果一直在触发事件，在执行事件时，每100ms 秒执行一次。

### Web Animations API

可以让我们用 JavaScript 写动画并且控制动画。

使用这些 API 进行开发时需要学习 CSS 的 animation、transform

一个动画示例

```js
// 创建类似于 CSS 中的 @keyframes 的内容。
// Web 动画 API 不需要告知动画出现的百分比，有三个键的关键帧对象将通过动画的每个循环的方式播放中间键
// 必须至少指定两个关键帧（表示动画序列的开始和结束状态）
var aliceTumbling = [
  { transform: 'rotate(0) translate3D(-50%, -50%, 0)', color: '#000' },
  { backgroundColor: '#431236', offset: 0.3 }, // 可以直接在对象中指定一个偏移量
  { transform: 'rotate(360deg) translate3D(-50%, -50%, 0)', color: '#000' }
];
// 创建动画的一些属性，延迟，是否循环，同 css 的 animate 控制的内容
let aliceTiming = {
  duration: 3000,
  iterations: Infinity
}
// 第二个参数也可以选择 3000，当然也只会执行一次
document.querySelector("dom").animate(
  aliceTumbling,
  aliceTiming
)
```

在创建时，会返回一个控制器，

```js
const controller = document.querySelector("dom").animate(
  aliceTumbling,
  aliceTiming
)
// 可以通过该控制器，控制动画的进程
controller.pause() // 暂停动画
controller.play(); // 执行内容

controller.finish() // 动画结束。
controller.cancel() // 终止动画。

// 控制动画的播放速度
controller.playbackRate = 0.4
// 控制当前动画的时间
controller.currentTime = 2000

controller.onfinish = () => {
  console.log('lalalal')
}
```



## 参考文章

| 作者         | 链接                                                         |
| ------------ | ------------------------------------------------------------ |
| MDN 官方文档 | https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Animations_API |





